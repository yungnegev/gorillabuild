# Active Workout

**Роут:** `workout/active`

## Назначение

Экран активной тренировки — основной рабочий экран в зале. Позволяет логировать упражнения и подходы в реальном времени.

## Сценарий (S1)

Start → добавить упражнение → добавить подходы (вес/повторы) → Finish

## Как открывается

- FAB "Start empty workout" на экране Plans → пустая тренировка
- Кнопка "Start plan" на Plan Detail → тренировка с prefill из плана
- Автоматически при запуске приложения, если есть незавершённая тренировка

## Содержимое экрана

- Список упражнений тренировки
- Под каждым упражнением — строки подходов: поля `weightKg` и `reps`
- Кнопка "+ подход" под каждым упражнением
- Кнопка "Finish workout"

## Prefill при старте плана

- Упражнения и число подходов берутся из `PlanExercise.plannedSetCount`
- `weightKg` и `reps` каждого подхода предзаполняются значениями из последней тренировки по этому упражнению
- Пользователь правит значения на месте

## Переходы

- Тап на упражнение → `exercise/[id]` (Exercise Detail)
- "Finish workout" → устанавливает `finishedAt`, закрывает экран, возврат на Plans

## Граничные кейсы

- При сворачивании или закрытии приложения тренировка сохраняется как незавершённая (`finishedAt` = null)
- При следующем открытии приложения незавершённая тренировка восстанавливается автоматически

## Модель данных

| Сущность | Поля |
|----------|------|
| `Workout` | `id`, `userId`, `startedAt`, `finishedAt?` |
| `WorkoutExercise` | `workoutId`, `exerciseId`, `order` |
| `SetEntry` | `workoutExerciseId`, `order`, `weightKg`, `reps` |
