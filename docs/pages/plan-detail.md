# Plan Detail

**Роут:** `plans/[id]`

## Назначение

Просмотр и редактирование конкретного плана тренировки. Позволяет настроить список упражнений, число подходов и порядок, а затем запустить тренировку.

## Сценарий (S4)

Открыть план → Start → сразу активная тренировка с упражнениями и предзаполненными подходами

## Содержимое экрана

- Название плана (редактируемое поле)
- Список упражнений плана (`PlanExercise`):
  - название упражнения
  - `plannedSetCount` — планируемое число подходов (редактируемое)
  - порядок упражнений (порядок строк в списке)
- Возможность добавить упражнение (выбор из справочника) и удалить упражнение из плана
- Кнопка «Сохранить» — отправляет изменения через `PATCH /api/plans/[id]` (тело: `name?`, `exercises?`)
- Кнопка "Start plan"
- Кнопка «Удалить план» — подтверждение, затем `DELETE /api/plans/[id]`, после успеха переход на `/plans`

## Важно про веса

Веса в плане **не фиксируются**. При старте плана `weightKg` и `reps` подтягиваются "как в прошлый раз" — из последней тренировки по каждому упражнению.

## Переходы

| Действие | Куда |
|----------|------|
| "Start plan" | `workout/active` (prefill из плана) |
| «Удалить план» → подтверждение | `DELETE` затем `/plans` |

## Модель данных

| Сущность | Поля |
|----------|------|
| `WorkoutPlan` | `id`, `userId`, `name`, `updatedAt` |
| `PlanExercise` | `planId`, `exerciseId`, `order`, `plannedSetCount?` |

## API

- `GET /api/plans/[id]` — план с упражнениями (для своего userId).
- `PATCH /api/plans/[id]` — обновление имени и/или списка упражнений (тело: `updatePlanSchema`).
- `DELETE /api/plans/[id]` — удаление плана.
